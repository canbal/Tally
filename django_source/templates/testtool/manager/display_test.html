{% extends "testtool/manager/base_manager.html" %}

{% block head %}
<style>
    ul {
        list-style: none;
    }
</style>
{% endblock head %}

{% block header %}
    {{ header }}
{% endblock header %}

{% block content %}
{% if error %}
    {{ error }}
{% else %}
<form class="form-horizontal" id="test_display_form" action="" method="post" enctype="multipart/form-data">
    <fieldset>
        <div class="control-group{% if form.owner.errors %} error{% endif %}">
            <label class="control-label" for="id_{{ form.owner.html_name }}">{{ form.owner.label }}</label>
            <div class="controls">
                {{ form.owner }}
            </div>
        </div>
	    {% for field in form %}
	       {% if field.name != 'owner' %}
    	<div class="control-group{% if field.errors %} error{% endif %}">
	    	<label class="control-label" for="id_{{ field.html_name }}">{{ field.label }}</label>
	    	<div class="controls">
	    	  	{{ field }}
            </div>
		</div>
		    {% endif %}
		{% endfor %}
    </fieldset>
</form>
<div class="form-horizontal">
	<fieldset>
		<div class="control-group">
			<label class="control-label" for="files_show">Files</label>
			<div class="controls">
				<div class="span5">
					<table class="table table-striped table-condensed table-bordered">
	    				{% for file in files %}
    					<tr id="row_del_file_{{ file.pk }}">
	    	    			<td align="left" width="100%">{{ file.filename }}</td>
	    				</tr>
    					{% endfor %}
					</table>
				</div>
			</div>
		</div>
        {% if files %}
		<div class="control-group">
    		<label class="control-label" for="id_test_cases">Test Cases</label>
			<div class="controls">
    			<div class="accordion span5" id="id_test_cases">
        		{% for tc in tc_data %}
        			<div class="accordion-group" id="row_del_tc_{{ tc.0.pk }}">
            			<div class="accordion-heading">
        					<table width="95%" align="center">
        						<tr>
									<td align="left" width="100%"><a class="accordion-toggle" data-toggle="collapse" data-parent="#id_test_cases" href="#collapse{{ forloop.counter }}">Test Case #{{ forloop.counter }}: {{ tc.0.pk }}</a></td>
								</tr>
							</table>
            			</div>
            			<div id="collapse{{ forloop.counter }}" class="accordion-body collapse">
                			<div class="accordion-inner">
                    			{% for vid in tc.1 %}
                        			{{ forloop.counter }}. {{ vid.0 }}{% if vid.1 %}<span style="color:red"> [ref]</span>{% endif %}<br/>
                    			{% endfor %}
                			</div>
        				</div>
        			</div>
        		{% endfor %}
    			</div>
			</div>
		</div>
      {% endif %}
	</fieldset>
</div>
<div class="form-horizontal">
    <div class="form-actions">
       <a class="btn" href="{% url testtool.manager.views.list_tests %}">View Test List</a>
       <a class="btn btn-primary" href="{% url edit_test test_id=test_pk %}">Edit</a>  
       {% if tc_data %}
       <a class="btn btn-success" href="{% url create_test_instance test_id=test_pk %}">Create New Instance</a>
       {% endif %}
    </div>
</div>

{% endif %}
{% endblock content %}